(this["webpackJsonpmern-final"]=this["webpackJsonpmern-final"]||[]).push([[0],{258:function(e,t,a){e.exports=a(437)},263:function(e,t,a){},264:function(e,t,a){},437:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(43),c=a.n(o),l=(a(263),a(248),a(57)),i=(a(264),a(121)),s=a(20),u=a(21),m=a(23),h=a(22),d=a(24),p=a(455),f=a(65),E=a(30),g=Object(E.a)(),v=a(38),b=a(220),y={},O={user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_USER":return t.data;case"REMOVE_USER":return null;default:return e}},token:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"STORE_TOKEN":return t.data;case"REMOVE_TOKEN":return null;default:return e}}},j=a(159),w=a(222),C={key:"root",storage:a.n(w).a},k=Object(j.a)(C,O),x=Object(v.e)(k,void 0,Object(v.d)(Object(v.a)(Object(b.createLogger)()))),S=Object(j.b)(x),T=a(115),N=a(223),R=a.n(N),_=a(120),F=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).makeMenuItems=function(){var e=x.getState().user;console.log(e);var t=[{text:"Home",to:"/home"},{text:"Menu",to:"/menu"},{text:"About",to:"/about"}];return a.isEmpty(e)||(t=[].concat(Object(i.a)(t),[{text:"Admin",to:"/admin",icon:"lock"}])),R.a.uniqBy([].concat(Object(i.a)(t),Object(i.a)(t)),(function(e){return e.to})).map((function(e){var t=e.to,a=e.icon,n=e.text;return r.a.createElement(p.a.Item,{as:T.a,to:t,key:t,selected:g.location.pathname===t},a&&r.a.createElement(f.a,{name:a}),n)}))},a.handleClick=function(e,t){var n=t.name;a.setState({active:n}),g.push({pathname:n})},a.state={active:"home",refresh:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"componentDidMount",value:function(){var e=window.location.pathname.split("/")[1];this.setState({activeItem:e})}},{key:"render",value:function(){this.state.active;return r.a.createElement(p.a,{secondary:!0},r.a.createElement("img",{src:"./assets/images/Saran_Thai_Logo.svg",alt:"logo"}),this.makeMenuItems())}}]),t}(n.Component),A=Object(_.b)((function(e){return{user:e.user}}))(F);function M(){return r.a.createElement("footer",null,r.a.createElement("iframe",{src:"https://www.facebook.com/plugins/like.php?href=https%3A%2F%2Fwww.facebook.com%2FSaran-thai-106762882727206%2F&width=155&layout=button_count&action=like&size=large&share=true&height=46&appId",width:"155",height:"46",style:{border:"none",overflow:"hidden"},scrolling:"no",frameBorder:"0",allowtransparency:"true",allow:"encrypted-media"}))}var P=a(446),U=a(438),D=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={clicked:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(P.a,{style:{width:"100%"}},r.a.createElement("div",{id:"home-hero"},r.a.createElement("div",{id:"hero-image"}),r.a.createElement("h1",null,"Saran Thai"),r.a.createElement("div",null,r.a.createElement(U.a,{primary:!0,size:"huge",className:"inverted",onClick:function(){return g.push({pathname:"/menu",state:{from:e.props.location.pathname}})}},"View Menu"))),r.a.createElement("div",{style:{width:"100%",display:"flex"}},r.a.createElement("div",{class:"homePanel",id:"cafe"},"Cafe coming soon"),r.a.createElement("div",{class:"homePanel",id:"booking"},"Bookings available ",r.a.createElement("br",null),"Contact us to book now",r.a.createElement(U.a,{primary:!0,size:"huge",className:"inverted",onClick:function(){return g.push({pathname:"/about",state:{from:e.props.location.pathname}})}},"Contact Us"))))}}]),t}(n.Component),B=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(P.a,{style:{width:"100%"}},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{id:"about-us"},r.a.createElement("h1",null,"About Us"))))}}]),t}(n.Component),I=a(457),L=a(456),H=a(451),V=a(454),J=a(458),K=a(452),z=a(32),q=a.n(z),G=a(453),$=a(448),Q=a(449),W=a(450),X=a(447),Y=(a(369),function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).submitForm=function(){return q.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.awrap(fetch("/menu/products",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state.form)}).then((function(e){return e.json()}),a.setState({created:!0})));case 2:case"end":return e.stop()}}))},a.state={form:{code:0,name_en:"",name_th:"",price:0,description:"",category:"",takeaway:!1},created:!1,categories:[]},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/category/all").then((function(e){return e.json()})).then((function(t){var a=t.data;e.setState({categories:a})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.categories,n=t.created;console.log(a),console.log(this.state.form);var o=[];a.map((function(e,t){o[t]={id:e._id,name:e.name}}));var c=[];return o.map((function(e,t){var a={};a.key=e.id,a.value=e.id,a.text=e.name,c.push(a)})),n&&g.push({pathname:"/menu"}),r.a.createElement(G.a,null,r.a.createElement(G.a.Group,{widths:"equal"},r.a.createElement(G.a.Field,{id:"form-input-control-name",control:$.a,label:"Dish Name English",placeholder:"Dish Name English",onChange:function(t,a){var n=a.value,r=e.state.form;r.name_en=n,e.setState({form:r})}}),r.a.createElement(G.a.Field,{id:"form-input-control-thai-name",control:$.a,label:"Dish Name Thai",placeholder:"Dish Name Thai",onChange:function(t,a){var n=a.value,r=e.state.form;r.name_th=n,e.setState({form:r})}}),r.a.createElement(G.a.Field,{id:"form-input-control-price",control:$.a,label:"Price",placeholder:"Price",onChange:function(t,a){var n=a.value,r=e.state.form;r.price=n,e.setState({form:r})}}),r.a.createElement(G.a.Field,{id:"form-input-control-code",control:$.a,label:"Menu Number",placeholder:"Code",onChange:function(t,a){var n=a.value,r=e.state.form;r.code=n,e.setState({form:r})}})),r.a.createElement(G.a.Field,{placeholder:"Category",label:"Select a category",control:Q.a,options:c,onChange:function(t,a){var n=a.value,r=e.state.form;r.category=n,e.setState({form:r})}}),r.a.createElement(G.a.Field,{id:"form-textarea-control-description",control:W.a,label:"Description",placeholder:"Description",onChange:function(t,a){var n=a.value,r=e.state.form;r.description=n,e.setState({form:r})}}),r.a.createElement(G.a.Field,null,r.a.createElement(X.a,{label:"Available for takeaway?",onClick:function(){var t=e.state.form;t.takeaway=!t.takeaway,e.setState({form:t})}})),r.a.createElement(G.a.Field,{id:"form-button-control-add-dish",control:U.a,content:"Add Dish",onClick:function(){return e.submitForm()}}))}}]),t}(n.Component)),Z=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).submitForm=function(){return q.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.awrap(fetch("/category",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)}).then((function(e){return e.json()}),a.setState({created:!0}),console.log(a.state)));case 2:case"end":return e.stop()}}))},a.state={name:""},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(G.a,null,r.a.createElement(G.a.Group,null,r.a.createElement(G.a.Field,{id:"form-input-control-name",control:$.a,label:"Category Name",placeholder:"Category Name",onChange:function(t,a){var n=a.value,r=e.state;r.name=n,e.setState({form:r})}})),r.a.createElement(U.a,{id:"form-button-control-create-category",control:U.a,content:"Create Category",onClick:function(){return e.submitForm()}}))}}]),t}(n.Component),ee=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).openModalHandler=function(){a.setState({isShowing:!0})},a.closeModalHandler=function(){a.setState({isShowing:!1})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(J.a,{style:{marginTop:"30px"}},r.a.createElement(I.a,{columns:2,stackable:!0,textAlign:"center"},r.a.createElement(H.a,{vertical:!0},"Or"),r.a.createElement(I.a.Row,null,r.a.createElement(I.a.Column,null,r.a.createElement(K.a,{dimmer:"inverted",centered:!1,trigger:r.a.createElement(U.a,{primary:!0,styling:{marginTop:"10px"},onClick:function(){e.openModalHandler("inverted")}},"Add Dish")},r.a.createElement(K.a.Content,null,r.a.createElement(Y,null)))),r.a.createElement(I.a.Column,null,r.a.createElement(K.a,{dimmer:"inverted",centered:!1,trigger:r.a.createElement(U.a,{primary:!0,onClick:function(){e.openModalHandler()}},"Create Category")},r.a.createElement(K.a.Content,null,r.a.createElement(Z,null)))))))}}]),t}(n.Component),te=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={categories:[],products:[],isShowing:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/category/all").then((function(e){return e.json()})).then((function(t){var a=t.data;e.setState({categories:a})})).catch((function(e){console.log(e)})),fetch("/menu/products/all").then((function(e){return e.json()})).then((function(t){var a=t.data;e.setState({products:a})})).catch((function(e){console.log(e)}))}},{key:"isEmpty",value:function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}},{key:"render",value:function(){var e=this,t=this.state,a=t.categories,n=t.products,o=x.getState().user;console.log(o),console.log(this.isEmpty(o));return r.a.createElement(P.a,{style:{width:"100%"}},function(){if(!e.isEmpty(o))return r.a.createElement(ee,null)}(),r.a.createElement(I.a,{columns:2},r.a.createElement(I.a.Row,null,r.a.createElement(I.a.Column,{width:3},r.a.createElement(p.a,{vertical:!0,text:!0,style:{marginLeft:"30px",marginTop:"15px",marginRight:"0px",marginBottom:"50px"}},r.a.createElement(p.a.Item,null,r.a.createElement(L.a,{as:"h2"},"Categories")),r.a.createElement(H.a,null),a.map((function(e){return r.a.createElement(p.a.Item,{selectable:!0,key:e.id},e.name)})))),r.a.createElement(I.a.Column,{style:{marginLeft:"10px"},width:12},r.a.createElement(V.a,{basic:"very",style:{marginTop:"32px"}},r.a.createElement(V.a.HeaderCell,{textAlign:"center"},"Name"),r.a.createElement(V.a.HeaderCell,{textAlign:"center"},"Category Name"),r.a.createElement(V.a.HeaderCell,{textAlign:"center"},"Price")),r.a.createElement(H.a,null),n.map((function(e,t){return e.flavour?r.a.createElement("div",{style:{marginBottom:"30px"}},r.a.createElement("div",{style:{marginBottom:"30px"}},r.a.createElement("span",{style:{display:"flex",width:"100%"}},r.a.createElement("h1",{style:{marginRight:"68%",marginLeft:"5%"}},e.name_en),e.flavour.map((function(e){return r.a.createElement("h1",{style:{marginTop:"0px"}},"$",e.price)}))),r.a.createElement("p",{style:{textAlign:"initial",marginLeft:"5%"}},e.description)),r.a.createElement(H.a,null)):r.a.createElement("div",{style:{marginBottom:"30px"}},r.a.createElement("div",{style:{marginBottom:"30px"}},r.a.createElement("span",{style:{display:"flex",width:"100%"}},r.a.createElement("h1",{style:{marginRight:"68%",marginLeft:"5%"}},e.name_en),r.a.createElement("h1",{style:{marginTop:"0px"}},"$",e.price)),r.a.createElement("p",{style:{textAlign:"initial",marginLeft:"5%"}},e.description)),r.a.createElement(H.a,null))}))))))}}]),t}(n.Component),ae=function(e){return{type:"STORE_TOKEN",data:e}},ne=function(e){return{type:"STORE_USER",data:e}},re=(a(245),function(){fetch("auth/logout"),x.dispatch({type:"REMOVE_TOKEN"}),x.dispatch((console.log("REMOVE USER"),{type:"REMOVE_USER"})),g.push("/login")}),oe=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(P.a,{style:{width:"100%"}},r.a.createElement(U.a,{onClick:re},"logout"),r.a.createElement("h1",null,"Products"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("th",null,"Code"),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Description"),r.a.createElement("th",null,"Price")),r.a.createElement("tbody",null,r.a.createElement("td",null),r.a.createElement("td",null))))}}]),t}(n.Component),ce=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).checkUser=function(){var e;return q.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.a.awrap(fetch("auth/user").then((function(e){return e.json()})));case 2:e=t.sent,console.log(e),e.success&&(a.setState({isAuthenticated:!0}),console.log(e.user._id),x.dispatch(ae(e.user._id)),x.dispatch(ne(e.user)),g.push("/home"),a.forceUpdate());case 5:case"end":return t.stop()}}))},a.logout=function(){return q.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q.a.awrap(fetch("auth/logout").then((function(){a.setState({isAuthenticated:!1}),a.checkUser()})).catch((function(e){return console.log(e)})));case 2:a.forceUpdate();case 3:case"end":return e.stop()}}))},a.login=function(){var e;return q.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.a.awrap(fetch("auth/login",{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state.form)}).then((function(e){return e.json()})));case 2:e=t.sent,a.setState({isAuthenticated:e.success}),a.checkUser();case 5:case"end":return t.stop()}}))},a.state={isAuthenticated:!1,form:{username:"",password:""},showPassword:!1,isLoading:!1},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.checkUser()}},{key:"render",value:function(){var e=this,t=this.state.showPassword,a=r.a.createElement(f.a,{link:!0,name:t?"eye":"eye slash",onClick:function(){e.setState({showPassword:!t})}});return r.a.createElement(P.a,null,r.a.createElement("div",{className:"wrapper"},r.a.createElement(I.a,{centered:!0},r.a.createElement(J.a,{style:{width:"300px",height:"400px",marginTop:"20px",borderRadius:"20px 20px"}},r.a.createElement(L.a,{as:"h1",style:{color:"#40c5cd",marginTop:"20px",marginBottom:"25rpx"}},"Saran Thai"),r.a.createElement(H.a,null),r.a.createElement("p",null,"Please enter admin sign in details"),r.a.createElement(G.a,null,r.a.createElement(G.a.Input,{autoFocus:!0,type:"text",name:"username",label:"Username",autoComplete:"username",placeholder:"",onChange:function(t,a){var n=a.value,r=e.state.form;r.username=n,e.setState({form:r})}}),r.a.createElement(G.a.Input,{autoFocus:!0,fluid:!0,name:"password",placeholder:"Password",label:"Password",autoComplete:"current-password",type:t?"text":"password",icon:a,onChange:function(t,a){var n=a.value,r=e.state.form;r.password=n,e.setState({form:r})}}),r.a.createElement(U.a,{type:"submit",style:{backgroundColor:"#40c5cd",color:"#ffffff",marginTop:"20px",marginBottom:"20px"},onClick:function(){return e.login()}},"Sign in"))))))}}]),t}(n.Component),le=a(246);c.a.render(r.a.createElement((function(){return r.a.createElement(_.a,{store:x},r.a.createElement(le.a,{persistor:S},r.a.createElement(l.c,{history:g},r.a.createElement("div",{className:"App"},r.a.createElement(A,null),r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/home",component:D}),r.a.createElement(l.b,{path:"/menu",component:te}),r.a.createElement(l.b,{path:"/about",component:B}),r.a.createElement(l.b,{path:"/login",component:ce}),r.a.createElement(l.b,{path:"/admin-dashboard",component:ee}),r.a.createElement(l.b,{path:"/admin",component:oe}),r.a.createElement(l.a,{from:"*",to:"/home"})),r.a.createElement(M,null)))))}),null),document.getElementById("root"))}},[[258,1,2]]]);
//# sourceMappingURL=main.a81d9925.chunk.js.map